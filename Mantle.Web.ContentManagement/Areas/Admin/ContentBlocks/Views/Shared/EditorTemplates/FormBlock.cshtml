@using Mantle.Web.ContentManagement
@using Mantle.Web.Mvc
@model Mantle.Web.ContentManagement.Areas.Admin.ContentBlocks.FormBlock

@inject Microsoft.Extensions.Localization.IStringLocalizer T

@{
    string textAlign = System.Globalization.CultureInfo.CurrentCulture.TextInfo.IsRightToLeft ? "right" : "left";
}

<div id="block-content">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="form-group">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                @Html.LabelFor(m => m.HtmlTemplate, new { @class = "control-label" })
                @Html.TextAreaFor(m => m.HtmlTemplate, new { @class = "form-control", data_bind = "wysiwyg: blockModel.htmlTemplate, wysiwygConfig: blockModel.tinyMCEConfig" })
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="form-group">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                @Html.LabelFor(m => m.ThankYouMessage, new { @class = "control-label" })
                @Html.TextAreaFor(m => m.ThankYouMessage, new { @class = "form-control", data_bind = "wysiwyg: blockModel.thankYouMessage, wysiwygConfig: blockModel.tinyMCEConfig" })
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <mantle-input asp-for="FormUrl" asp-label="@T[MantleCmsLocalizableStrings.ContentBlocks.FormBlock.FormUrl]" ko-bind="blockModel.formUrl" asp-help="@T[MantleCmsLocalizableStrings.ContentBlocks.FormBlock.HelpText.FormUrl]" />
    </div>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="form-group">
            @Html.LabelFor(m => m.RedirectUrl, new { @class = "col-xs-12 col-sm-4 col-md-3 col-lg-3", style = "text-align:" + textAlign + ";" })
            <div class="col-xs-12 col-sm-8 col-md-9 col-lg-9">
                @Html.TextBoxFor(m => m.RedirectUrl, new { @class = "form-control", data_bind = "value: blockModel.redirectUrl" })
            </div>
        </div>
        <div class="form-group">
            <label class="col-xs-12 col-sm-4 col-md-3 col-lg-3"></label>
            <div class="col-xs-12 col-sm-8 col-md-9 col-lg-9">
                <mantle-input asp-for="UseAjax" asp-label="@T[MantleCmsLocalizableStrings.ContentBlocks.FormBlock.UseAjax]" ko-bind="blockModel.useAjax" />
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <mantle-input asp-for="EmailAddress"
            asp-label="@T[MantleCmsLocalizableStrings.ContentBlocks.FormBlock.EmailAddress]"
            ko-bind="blockModel.emailAddress"
            asp-help="@T[MantleCmsLocalizableStrings.ContentBlocks.FormBlock.HelpText.EmailAddress]" />
    </div>
</div>

<script type="text/javascript">
    function stripHTML(html) {
        return $("<div/>").html(html).text();
    };

    @Model.RenderKOScript()
</script>