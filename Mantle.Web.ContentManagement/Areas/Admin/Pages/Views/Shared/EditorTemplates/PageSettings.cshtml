@using Mantle.Web.ContentManagement.Areas.Admin.Pages

@model PageSettings

<div id="settings-content">
    <div class="form-group">
        @Html.LabelFor(m => m.NumberOfPageVersionsToKeep)
        <input type="text" id="NumberOfPageVersionsToKeep" name="NumberOfPageVersionsToKeep" class="form-control" value.bind="numberOfPageVersionsToKeep" />
        @Html.ValidationMessageFor(m => m.NumberOfPageVersionsToKeep)
    </div>
</div>

<script type="text/javascript">
    function updateModel(viewModel, data) {
        viewModel.numberOfPageVersionsToKeep = '';

        if (data && data.NumberOfPageVersionsToKeep) {
            viewModel.numberOfPageVersionsToKeep = data.NumberOfPageVersionsToKeep;
        }
    }

    function cleanUp(viewModel) {
        delete viewModel.numberOfPageVersionsToKeep;
    }

    function onBeforeSave(viewModel) {
        var data = {
            NumberOfPageVersionsToKeep: viewModel.numberOfPageVersionsToKeep
        };
    
        viewModel.value = JSON.stringify(data);
    }
</script>